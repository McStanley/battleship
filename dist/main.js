(()=>{"use strict";class t{ship=null;#t=!1;get wasAttacked(){return this.#t}attack(){this.#t=!0}}class e{#e=Array(10).fill().map((()=>Array(10).fill().map((()=>new t))));get board(){return this.#e}placeShip(t,a,r){const n=e.calculatePlacement(t,a,r);for(let e=0;e<n.length;e+=1){const a=n[e],r=a[0],s=a[1];this.#e[r][s].ship=t}}canPlace(t,a,r){const n=e.calculatePlacement(t,a,r);for(let t=0;t<n.length;t+=1){const e=n[t],a=e[0],r=e[1];if(a<0||a>9)return!1;if(r<0||r>9)return!1;if(this.#e[a][r].ship)return!1;const s=[[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0]];for(let t=0;t<s.length;t+=1){const e=s[t],[n,i]=[e[0],e[1]];if(this.#e[a+n]?.[r+i]?.ship)return!1}}return!0}static calculatePlacement(t,e,a){const r=[];for(let n=0;n<t.length;n+=1){const t=e[0]+("horizontal"===a?n:0),s=e[1]+("vertical"===a?n:0);r.push([t,s])}return r}receiveAttack(t,e){this.#e[t][e].attack(),this.#e[t][e].ship&&this.#e[t][e].ship.hit()}get allSunk(){for(let t=0;t<this.#e.length;t+=1){const e=this.#e[t];for(let t=0;t<e.length;t+=1){const a=e[t];if(a.ship&&!a.wasAttacked)return!1}}return!0}}class a{#a;#r;#n=new e;constructor(t,e){this.#a=t,this.#r=e}get name(){return this.#a}get isHuman(){return this.#r}get gameboard(){return this.#n}static attack(t,e){const[a,r]=[e[0],e[1]];t.gameboard.receiveAttack(a,r)}}class r{#s;#i=0;constructor(t){this.#s=t}get length(){return this.#s}get hits(){return this.#i}hit(){this.#i+=1}isSunk(){return this.#i===this.#s}}const n=(t,e)=>{let a,r,n;do{a=Math.floor(10*Math.random()),r=Math.floor(10*Math.random()),n=Math.random()<.5?"horizontal":"vertical"}while(!t.gameboard.canPlace(e,[a,r],n));return{location:[a,r],direction:n}},s=(t,e)=>{const{x:a,y:r}=t.dataset;return e.gameboard.board[a][r]},i=(()=>{let t,e;const s=t=>{const e=[new r(5),new r(4),new r(3),new r(3),new r(2)];for(;e.length;){const a=e.shift(),r=n(t,a);t.gameboard.placeShip(a,r.location,r.direction)}};return{getActive:()=>t,getPassive:()=>e,init:()=>{t=new a("Player 1",!0),e=new a("Player 2",!0),s(t),s(e)}}})();i.init(),(()=>{(t=>{t.replaceChildren();for(let e=0;e<10;e+=1)for(let a=0;a<10;a+=1){const r=document.createElement("div");r.classList.add("grid-cell"),r.dataset.x=a,r.dataset.y=e,t.appendChild(r)}})(document.querySelector("#left-grid"));const t=document.querySelectorAll("#left-grid > .grid-cell"),e=i.getActive();for(let a=0;a<t.length;a+=1){const r=t[a];s(r,e).ship&&(r.style.backgroundColor="grey")}})()})();